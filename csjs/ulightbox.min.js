// Функция для установки размера текста путем изменения CSS переменных
function setTextSize(size) {
    let root = document.documentElement;

    if (size === 'small') {
        root.style.setProperty('--tpl-font-size-small', '13px');
        root.style.setProperty('--tpl-font-size', '14px');
        root.style.setProperty('--tpl-font-size-plus', '16px');
        root.style.setProperty('--tpl-font-size-medium', '14px');
        root.style.setProperty('--tpl-font-size-medium-plus', '15px');
        root.style.setProperty('--tpl-font-size-large', '28px');
        root.style.setProperty('--tpl-font-size-extra-large', '15px');
    } else if (size === 'normal') {
        root.style.setProperty('--tpl-font-size-small', '15px');
        root.style.setProperty('--tpl-font-size', '16px');
        root.style.setProperty('--tpl-font-size-plus', '19px');
        root.style.setProperty('--tpl-font-size-medium', '16px');
        root.style.setProperty('--tpl-font-size-medium-plus', '17px');
        root.style.setProperty('--tpl-font-size-large', '31px');
        root.style.setProperty('--tpl-font-size-extra-large', '17px');
    } else if (size === 'large') {
        root.style.setProperty('--tpl-font-size-small', '17px');
        root.style.setProperty('--tpl-font-size', '18px');
        root.style.setProperty('--tpl-font-size-plus', '21px');
        root.style.setProperty('--tpl-font-size-medium', '18px');
        root.style.setProperty('--tpl-font-size-medium-plus', '19px');
        root.style.setProperty('--tpl-font-size-large', '34px');
        root.style.setProperty('--tpl-font-size-extra-large', '19px');
    }

    // Сохраняем выбранный размер текста в cookies
    document.cookie = `textSize=${size}; path=/; max-age=31536000;`; // сохраняем на 1 год
}

// Функция для получения значения cookies
function getCookie(name) {
    let matches = document.cookie.match(new RegExp(
        "(?:^|; )" + name.replace(/([.$?*|{}()\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
    ));
    return matches ? decodeURIComponent(matches[1]) : undefined;
}

// Инициализация настройки при загрузке страницы
document.addEventListener('DOMContentLoaded', () => {
    // Применение сохраненного размера текста
    let savedSize = getCookie('textSize');
    if (savedSize) {
        setTextSize(savedSize);
    }

    // Обработка события скролла для изменения стиля хедера
    const header = document.getElementById('header');
    document.addEventListener('scroll', () => {
        if (window.scrollY > 0) {
            header.classList.add('header-scrolled');
        } else {
            header.classList.remove('header-scrolled');
        }
    });

    // Отображение и скрытие списка опций размера текста
    document.getElementById('eyeButton').addEventListener('click', () => {
        let sizeOptions = document.getElementById('sizeOptions');
        sizeOptions.style.display = sizeOptions.style.display === 'none' ? 'block' : 'none';
    });

    // Изменение размера текста при выборе опции
    let buttons = document.querySelectorAll('#sizeOptions button');
    buttons.forEach(button => {
        button.addEventListener('click', () => {
            let size = button.getAttribute('data-size');
            setTextSize(size);
            document.getElementById('sizeOptions').style.display = 'none';
        });
    });
});
