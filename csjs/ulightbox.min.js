// 1 Function to set text size by changing CSS variables
function setTextSize(size) {
    let root = document.documentElement;

    if (size === 'small') {
        root.style.setProperty('--tpl-font-size-extra-small', '12px');
        root.style.setProperty('--tpl-font-size-small', '13px');
        root.style.setProperty('--tpl-font-size', '14px');
        root.style.setProperty('--tpl-font-size-plus', '16px');
        root.style.setProperty('--tpl-font-size-medium', '14px');
        root.style.setProperty('--tpl-font-size-medium-plus', '15px');
        root.style.setProperty('--tpl-font-size-large', '28px');
        root.style.setProperty('--tpl-font-size-extra-large', '18px');
    } else if (size === 'normal') {
        root.style.setProperty('--tpl-font-size-extra-small', '13px');
        root.style.setProperty('--tpl-font-size-small', '14px');
        root.style.setProperty('--tpl-font-size', '15px');
        root.style.setProperty('--tpl-font-size-plus', '17px');
        root.style.setProperty('--tpl-font-size-medium', '15px');
        root.style.setProperty('--tpl-font-size-medium-plus', '16px');
        root.style.setProperty('--tpl-font-size-large', '30px');
        root.style.setProperty('--tpl-font-size-extra-large', '19px');
    } else if (size === 'large') {
        root.style.setProperty('--tpl-font-size-extra-small', '14px');
        root.style.setProperty('--tpl-font-size-small', '15px');
        root.style.setProperty('--tpl-font-size', '16px');
        root.style.setProperty('--tpl-font-size-plus', '18px');
        root.style.setProperty('--tpl-font-size-medium', '16px');
        root.style.setProperty('--tpl-font-size-medium-plus', '17px');
        root.style.setProperty('--tpl-font-size-large', '32px');
        root.style.setProperty('--tpl-font-size-extra-large', '20px');
    }

    // We save the selected text size in cookies
    document.cookie = `textSize=${size}; path=/; max-age=31536000;`; // save for 1 year
}

// 2 Function to change text color
function setTextColor(color) {
    let root = document.documentElement;

    if (color === 'standart') {
        root.style.setProperty('--link-a', '#5340cc');
        root.style.setProperty('--link-b', '#705EDD');
        root.style.setProperty('--link-c', '#8172DD');
        root.style.setProperty('--link-a-hover', '#8172DD');
        root.style.setProperty('--link-b-hover', '#978AE8');
        root.style.setProperty('--link-c-hover', '#978AE8');
    } else if (color === 'blue') {
        root.style.setProperty('--link-a', '#0057AB');
        root.style.setProperty('--link-b', '#2175C7');
        root.style.setProperty('--link-c', '#3B82C7');
        root.style.setProperty('--link-a-hover', '#3B82C7');
        root.style.setProperty('--link-b-hover', '#5A9BD9');
        root.style.setProperty('--link-c-hover', '#5A9BD9');
    } else if (color === 'green') {
        root.style.setProperty('--link-a', '#008383');
        root.style.setProperty('--link-b', '#1CACAC');
        root.style.setProperty('--link-c', '#33ACAC');
        root.style.setProperty('--link-a-hover', '#33ACAC');
        root.style.setProperty('--link-b-hover', '#52C7C7');
        root.style.setProperty('--link-c-hover', '#52C7C7');
    } else if (color === 'light-green') {
        root.style.setProperty('--link-a', '#1DBA6F');
        root.style.setProperty('--link-b', '#3ED18A');
        root.style.setProperty('--link-c', '#55D195');
        root.style.setProperty('--link-a-hover', '#55D195');
        root.style.setProperty('--link-b-hover', '#71E0AB');
        root.style.setProperty('--link-c-hover', '#71E0AB');
    } else if (color === 'black') {
        root.style.setProperty('--link-a', '#222');
        root.style.setProperty('--link-b', '#222');
        root.style.setProperty('--link-c', '#222');
        root.style.setProperty('--link-a-hover', '#444');
        root.style.setProperty('--link-b-hover', '#444');
        root.style.setProperty('--link-c-hover', '#444');
    }

    // Save the selected text color in cookies
    document.cookie = `textColor=${color}; path=/; max-age=31536000;`; // save for 1 year
}



// 3 Function to change width
function setTextWidth(width) {
    let root = document.documentElement;

    if (width === 'tight') {
        root.style.setProperty('--tpl-max-layout-width', '1140px');
    } else if (width === 'medium') {
      root.style.setProperty('--tpl-max-layout-width', '1340px');
    } else if (width === 'wide') {
        root.style.setProperty('--tpl-max-layout-width', '1540px');
    }

    // Save the selected text width in cookies
    document.cookie = `textWidth=${width}; path=/; max-age=31536000;`; // save for 1 year
}



// Function to get cookie value
function getCookie(name) {
    let matches = document.cookie.match(new RegExp(
        "(?:^|; )" + name.replace(/([.$?*|{}()\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
    ));
    return matches ? decodeURIComponent(matches[1]) : undefined;
}

// Initialize the setting when the page loads
document.addEventListener('DOMContentLoaded', () => {

    // OREY

    // Определяем стандартные настройки
    const defaultFontSize = 'normal'; // Стандартный размер шрифта
    const defaultColor = 'standart'; // Стандартный цвет
    const defaultWidth = 'medium'; // Стандартная ширина

    // Применяем сохраненный размер текста или стандартный
    let savedSize = getCookie('textSize');
    if (savedSize) {
        setTextSize(savedSize);
        document.querySelector(`input[name="fontSize"][value="${savedSize}"]`).checked = true;
    } else {
        // Установка стандартного размера текста
        setTextSize(defaultFontSize);
        document.querySelector(`input[name="fontSize"][value="${defaultFontSize}"]`).checked = true;
    }

    // Применяем сохраненный цвет текста или стандартный
    let savedColor = getCookie('textColor');
    if (savedColor) {
        setTextColor(savedColor);
        document.querySelector(`input[name="color"][value="${savedColor}"]`).checked = true;
    } else {
        // Установка стандартного цвета текста
        setTextColor(defaultColor);
        document.querySelector(`input[name="color"][value="${defaultColor}"]`).checked = true;
    }

    // Применяем сохраненную ширину текста или стандартную
    let savedWidth = getCookie('textWidth');
    if (savedWidth) {
        setTextWidth(savedWidth);
        document.querySelector(`input[name="width"][value="${savedWidth}"]`).checked = true;
    } else {
        // Установка стандартной ширины текста
        setTextWidth(defaultWidth);
        document.querySelector(`input[name="width"][value="${defaultWidth}"]`).checked = true;
    }

    // Handling text resizing
    document.querySelectorAll('input[name="fontSize"]').forEach(input => {
        input.addEventListener('change', () => {
            setTextSize(input.value);
        });
    });

    // Handling text color change
    document.querySelectorAll('input[name="color"]').forEach(input => {
        input.addEventListener('change', () => {
            setTextColor(input.value);
        });
    });

    // Handling text width change
    document.querySelectorAll('input[name="width"]').forEach(input => {
        input.addEventListener('change', () => {
            setTextWidth(input.value);
        });
    });
});









